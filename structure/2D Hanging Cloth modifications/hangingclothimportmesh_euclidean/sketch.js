var mesh = [[1392, -327, 1300, -273], [1364, -382, 1362, -386], [1364, -382, 1393, -332], [1300, -273, 1296, -271], [1300, -386, 1358, -386], [1300, -386, 1296, -386], [1362, -386, 1358, -386], [1360, -382, 1362, -386], [1360, -382, 1298, -275], [1298, -275, 1296, -271], [1296, 415, 1300, 417], [1364, 526, 1362, 529], [1392, 470, 1300, 417], [1393, 475, 1364, 526], [500, -386, 504, -386], [438, -386, 442, -386], [442, -386, 500, -386], [504, -271, 501, -273], [407, -332, 436, -382], [408, -327, 501, -273], [438, -386, 436, -382], [504, -271, 502, -275], [440, -382, 502, -275], [440, -382, 438, -386], [438, 529, 436, 526], [407, 475, 436, 526], [501, 417, 504, 415], [408, 470, 501, 417], [1230, -386, 1234, -386], [1234, -386, 1292, -386], [1292, -386, 1296, -386], [1296, -382, 1296, -386], [1296, -275, 1296, -271], [1296, -382, 1296, -275], [1358, 529, 1300, 529], [1300, 529, 1296, 529], [1358, 529, 1362, 529], [1362, 529, 1360, 526], [1298, 418, 1296, 415], [1298, 418, 1360, 526], [900, 76, 900, 182], [900, 182, 900, 186], [900, 72, 900, 76], [508, -386, 566, -386], [570, -386, 566, -386], [508, -386, 504, -386], [504, -271, 504, -275], [504, -382, 504, -386], [504, -382, 504, -275], [500, 529, 504, 529], [438, 529, 442, 529], [442, 529, 500, 529], [502, 418, 504, 415], [440, 526, 438, 529], [440, 526, 502, 418], [900, 186, 898, 183], [834, 72, 836, 75], [836, 75, 898, 183], [1199, -332, 1228, -382], [1199, -332, 1197, -329], [1230, -386, 1228, -382], [1294, -275, 1296, -271], [1232, -382, 1230, -386], [1232, -382, 1294, -275], [1300, -269, 1296, -271], [1393, -211, 1364, -160], [1364, -160, 1362, -157], [1392, -216, 1300, -269], [1234, 529, 1230, 529], [1234, 529, 1292, 529], [1296, 529, 1292, 529], [1296, 419, 1296, 525], [1296, 415, 1296, 419], [1296, 525, 1296, 529], [572, -382, 601, -332], [572, -382, 570, -386], [603, -329, 601, -332], [568, -382, 570, -386], [568, -382, 506, -275], [504, -271, 506, -275], [501, -269, 504, -271], [438, -157, 436, -160], [408, -216, 501, -269], [407, -211, 436, -160], [508, 529, 566, 529], [508, 529, 504, 529], [570, 529, 566, 529], [504, 525, 504, 529], [504, 525, 504, 419], [504, 419, 504, 415], [1197, -329, 1195, -325], [1166, -275, 1164, -271], [1166, -275, 1195, -325], [1201, -327, 1197, -329], [1201, -327, 1293, -273], [1293, -273, 1296, -271], [1360, -160, 1298, -268], [1298, -268, 1296, -271], [1360, -160, 1362, -157], [1393, -103, 1364, -154], [1392, -98, 1300, -45], [1364, -154, 1362, -157], [1296, -43, 1300, -45], [1364, 304, 1362, 300], [1392, 360, 1300, 413], [1296, 415, 1300, 413], [1393, 354, 1364, 304], [1102, 531, 1098, 529], [1194, 584, 1102, 531], [1228, 532, 1199, 583], [1228, 532, 1230, 529], [1230, 529, 1232, 526], [1296, 415, 1294, 418], [1232, 526, 1294, 418], [634, -275, 636, -271], [605, -325, 603, -329], [605, -325, 634, -275], [600, -327, 507, -273], [504, -271, 507, -273], [600, -327, 603, -329], [502, -268, 440, -160], [440, -160, 438, -157], [502, -268, 504, -271], [407, -103, 436, -154], [504, -43, 501, -45], [438, -157, 436, -154], [408, -98, 501, -45], [438, 300, 436, 304], [501, 413, 408, 360], [501, 413, 504, 415], [407, 354, 436, 304], [606, 584, 699, 531], [572, 532, 570, 529], [702, 529, 699, 531], [572, 532, 601, 583], [506, 418, 568, 526], [504, 415, 506, 418], [570, 529, 568, 526], [904, -386, 900, -386], [904, -386, 962, -386], [966, -386, 962, -386], [1168, -271, 1164, -271], [1168, -271, 1292, -271], [1292, -271, 1296, -271], [1296, -267, 1296, -271], [1296, -161, 1296, -157], [1296, -161, 1296, -267], [1300, -157, 1296, -157], [1300, -157, 1358, -157], [1358, -157, 1362, -157], [1360, -154, 1362, -157], [1360, -154, 1298, -46], [1296, -43, 1298, -46], [1362, 72, 1364, 68], [1393, 18, 1364, 68], [1296, -43, 1300, -41], [1392, 13, 1300, -41], [1296, 186, 1300, 188], [1392, 241, 1300, 188], [1393, 247, 1364, 297], [1364, 297, 1362, 300], [1298, 411, 1360, 304], [1362, 300, 1360, 304], [1298, 411, 1296, 415], [1226, 529, 1230, 529], [1226, 529, 1102, 529], [1102, 529, 1098, 529], [1199, 475, 1197, 472], [1199, 475, 1228, 526], [1230, 529, 1228, 526], [1296, 415, 1293, 417], [1201, 470, 1293, 417], [1197, 472, 1201, 470], [997, 583, 968, 532], [1095, 531, 1003, 584], [1095, 531, 1098, 529], [966, 529, 968, 532], [834, -386, 838, -386], [838, -386, 896, -386], [896, -386, 900, -386], [900, -275, 900, -271], [900, -382, 900, -386], [900, -382, 900, -275], [632, -271, 636, -271], [504, -271, 508, -271], [632, -271, 508, -271], [504, -267, 504, -271], [504, -157, 504, -161], [504, -161, 504, -267], [500, -157, 504, -157], [500, -157, 442, -157], [438, -157, 442, -157], [504, -43, 502, -46], [440, -154, 438, -157], [440, -154, 502, -46], [501, -41, 504, -43], [438, 72, 436, 68], [408, 13, 501, -41], [407, 18, 436, 68], [408, 241, 501, 188], [407, 247, 436, 297], [501, 188, 504, 186], [438, 300, 436, 297], [504, 415, 502, 411], [440, 304, 502, 411], [440, 304, 438, 300], [698, 529, 574, 529], [698, 529, 702, 529], [570, 529, 574, 529], [601, 475, 572, 526], [572, 526, 570, 529], [601, 475, 603, 472], [504, 415, 507, 417], [603, 472, 600, 470], [507, 417, 600, 470], [705, 531, 798, 584], [803, 583, 832, 532], [832, 532, 834, 529], [702, 529, 705, 531], [999, -329, 997, -332], [968, -382, 997, -332], [968, -382, 966, -386], [902, -275, 900, -271], [964, -382, 966, -386], [964, -382, 902, -275], [1201, -216, 1293, -269], [1296, -271, 1293, -269], [1197, -214, 1201, -216], [1232, -160, 1230, -157], [1232, -160, 1294, -268], [1294, -268, 1296, -271], [1195, -218, 1197, -214], [1164, -271, 1166, -268], [1195, -218, 1166, -268], [1234, -157, 1292, -157], [1292, -157, 1296, -157], [1234, -157, 1230, -157], [1296, -47, 1296, -153], [1296, -43, 1296, -47], [1296, -153, 1296, -157], [1362, 72, 1364, 75], [1393, 125, 1364, 75], [1300, 184, 1296, 186], [1300, 184, 1392, 131], [1360, 68, 1362, 72], [1296, -43, 1298, -39], [1360, 68, 1298, -39], [1298, 189, 1360, 297], [1296, 186, 1298, 189], [1362, 300, 1360, 297], [1300, 300, 1358, 300], [1300, 300, 1296, 300], [1362, 300, 1358, 300], [1296, 415, 1296, 411], [1296, 304, 1296, 411], [1296, 304, 1296, 300], [1194, 474, 1102, 527], [1197, 472, 1194, 474], [1098, 529, 1102, 527], [1195, 468, 1166, 418], [1166, 418, 1164, 415], [1197, 472, 1195, 468], [1168, 415, 1164, 415], [1168, 415, 1292, 415], [1296, 415, 1292, 415], [970, 529, 966, 529], [970, 529, 1094, 529], [1094, 529, 1098, 529], [966, 529, 962, 529], [904, 529, 962, 529], [904, 529, 900, 529], [834, -386, 832, -382], [803, -332, 832, -382], [803, -332, 801, -329], [836, -382, 834, -386], [836, -382, 898, -275], [898, -275, 900, -271], [507, -269, 600, -216], [603, -214, 600, -216], [504, -271, 507, -269], [568, -160, 506, -268], [570, -157, 568, -160], [504, -271, 506, -268], [605, -218, 603, -214], [605, -218, 634, -268], [634, -268, 636, -271], [508, -157, 504, -157], [508, -157, 566, -157], [570, -157, 566, -157], [504, -153, 504, -157], [504, -43, 504, -47], [504, -153, 504, -47], [438, 72, 436, 75], [504, 186, 501, 184], [408, 131, 501, 184], [407, 125, 436, 75], [502, -39, 504, -43], [502, -39, 440, 68], [440, 68, 438, 72], [440, 297, 438, 300], [502, 189, 440, 297], [502, 189, 504, 186], [500, 300, 504, 300], [438, 300, 442, 300], [500, 300, 442, 300], [504, 304, 504, 300], [504, 415, 504, 411], [504, 304, 504, 411], [606, 474, 699, 527], [606, 474, 603, 472], [702, 529, 699, 527], [634, 418, 636, 415], [605, 468, 603, 472], [634, 418, 605, 468], [632, 415, 508, 415], [632, 415, 636, 415], [504, 415, 508, 415], [702, 529, 706, 529], [830, 529, 706, 529], [830, 529, 834, 529], [896, 529, 838, 529], [896, 529, 900, 529], [838, 529, 834, 529], [900, 419, 900, 525], [900, 529, 900, 525], [900, 415, 900, 419], [1102, -271, 1160, -271], [1160, -271, 1164, -271], [1102, -271, 1098, -271], [1162, -268, 1164, -271], [1098, -157, 1100, -160], [1162, -268, 1100, -160], [1001, -325, 1030, -275], [1001, -325, 999, -329], [1032, -271, 1030, -275], [996, -327, 903, -273], [903, -273, 900, -271], [996, -327, 999, -329], [1230, -157, 1228, -160], [1197, -214, 1199, -211], [1199, -211, 1228, -160], [1098, -157, 1102, -159], [1102, -159, 1194, -212], [1197, -214, 1194, -212], [1230, -157, 1232, -154], [1294, -46, 1232, -154], [1294, -46, 1296, -43], [1298, 183, 1296, 186], [1298, 183, 1360, 75], [1360, 75, 1362, 72], [1300, 72, 1296, 72], [1362, 72, 1358, 72], [1300, 72, 1358, 72], [1296, 68, 1296, 72], [1296, 68, 1296, -39], [1296, -43, 1296, -39], [1296, 190, 1296, 296], [1296, 186, 1296, 190], [1296, 300, 1296, 296], [1292, 300, 1296, 300], [1234, 300, 1292, 300], [1230, 300, 1234, 300], [1230, 300, 1232, 304], [1232, 304, 1294, 411], [1296, 415, 1294, 411], [1197, 358, 1201, 360], [1293, 413, 1201, 360], [1296, 415, 1293, 413], [1164, 415, 1162, 418], [1100, 526, 1098, 529], [1100, 526, 1162, 418], [1195, 361, 1197, 358], [1195, 361, 1166, 411], [1166, 411, 1164, 415], [1095, 527, 1003, 474], [1098, 529, 1095, 527], [999, 472, 1003, 474], [968, 526, 966, 529], [997, 475, 999, 472], [968, 526, 997, 475], [902, 418, 964, 526], [900, 415, 902, 418], [966, 529, 964, 526], [698, -271, 640, -271], [636, -271, 640, -271], [698, -271, 702, -271], [702, -157, 700, -160], [638, -268, 700, -160], [636, -271, 638, -268], [770, -275, 768, -271], [770, -275, 799, -325], [801, -329, 799, -325], [804, -327, 801, -329], [804, -327, 897, -273], [897, -273, 900, -271], [570, -157, 572, -160], [603, -214, 601, -211], [601, -211, 572, -160], [603, -214, 606, -212], [702, -157, 699, -159], [606, -212, 699, -159], [504, -43, 506, -46], [568, -154, 506, -46], [568, -154, 570, -157], [504, 186, 502, 183], [440, 75, 502, 183], [440, 75, 438, 72], [438, 72, 442, 72], [500, 72, 442, 72], [500, 72, 504, 72], [504, -39, 504, -43], [504, 72, 504, 68], [504, 68, 504, -39], [504, 296, 504, 190], [504, 300, 504, 296], [504, 190, 504, 186], [570, 300, 566, 300], [508, 300, 504, 300], [508, 300, 566, 300], [568, 304, 506, 411], [504, 415, 506, 411], [568, 304, 570, 300], [600, 360, 507, 413], [504, 415, 507, 413], [603, 358, 600, 360], [700, 526, 638, 418], [702, 529, 700, 526], [636, 415, 638, 418], [636, 415, 634, 411], [605, 361, 603, 358], [605, 361, 634, 411], [702, 529, 705, 527], [801, 472, 798, 474], [705, 527, 798, 474], [803, 475, 832, 526], [834, 529, 832, 526], [803, 475, 801, 472], [836, 526, 898, 418], [900, 415, 898, 418], [836, 526, 834, 529], [1032, -271, 1036, -271], [1094, -271, 1098, -271], [1094, -271, 1036, -271], [1098, -157, 1098, -161], [1098, -271, 1098, -267], [1098, -161, 1098, -267], [904, -271, 900, -271], [1028, -271, 904, -271], [1028, -271, 1032, -271], [1102, -157, 1226, -157], [1098, -157, 1102, -157], [1230, -157, 1226, -157], [1199, -103, 1228, -154], [1199, -103, 1197, -100], [1230, -157, 1228, -154], [1197, -100, 1201, -98], [1296, -43, 1293, -45], [1293, -45, 1201, -98], [1296, 182, 1296, 186], [1296, 76, 1296, 182], [1296, 72, 1296, 76], [1292, 72, 1296, 72], [1292, 72, 1234, 72], [1230, 72, 1234, 72], [1232, 68, 1230, 72], [1232, 68, 1294, -39], [1296, -43, 1294, -39], [1230, 300, 1232, 297], [1296, 186, 1294, 189], [1232, 297, 1294, 189], [1230, 300, 1228, 304], [1197, 358, 1199, 354], [1199, 354, 1228, 304], [1197, 358, 1194, 356], [1194, 356, 1102, 302], [1098, 300, 1102, 302], [1098, 419, 1098, 525], [1098, 419, 1098, 415], [1098, 529, 1098, 525], [1034, 418, 1032, 415], [1096, 526, 1034, 418], [1098, 529, 1096, 526], [1102, 415, 1160, 415], [1102, 415, 1098, 415], [1164, 415, 1160, 415], [1164, 415, 1162, 411], [1098, 300, 1100, 304], [1162, 411, 1100, 304], [1001, 468, 999, 472], [1030, 418, 1032, 415], [1001, 468, 1030, 418], [900, 415, 903, 417], [996, 470, 903, 417], [996, 470, 999, 472], [706, -271, 702, -271], [706, -271, 764, -271], [764, -271, 768, -271], [702, -267, 702, -161], [702, -271, 702, -267], [702, -161, 702, -157], [896, -271, 900, -271], [772, -271, 768, -271], [772, -271, 896, -271], [570, -157, 574, -157], [574, -157, 698, -157], [702, -157, 698, -157], [572, -154, 570, -157], [572, -154, 601, -103], [603, -100, 601, -103], [600, -98, 507, -45], [603, -100, 600, -98], [504, -43, 507, -45], [504, 186, 504, 182], [504, 76, 504, 182], [504, 76, 504, 72], [508, 72, 504, 72], [570, 72, 566, 72], [508, 72, 566, 72], [568, 68, 506, -39], [504, -43, 506, -39], [570, 72, 568, 68], [570, 300, 568, 297], [504, 186, 506, 189], [568, 297, 506, 189], [572, 304, 601, 354], [572, 304, 570, 300], [603, 358, 601, 354], [702, 300, 699, 302], [606, 356, 699, 302], [603, 358, 606, 356], [702, 415, 702, 419], [702, 525, 702, 419], [702, 529, 702, 525], [766, 418, 768, 415], [702, 529, 704, 526], [766, 418, 704, 526], [698, 415, 640, 415], [702, 415, 698, 415], [636, 415, 640, 415], [702, 300, 700, 304], [638, 411, 700, 304], [636, 415, 638, 411], [801, 472, 799, 468], [799, 468, 770, 418], [768, 415, 770, 418], [897, 417, 804, 470], [900, 415, 897, 417], [801, 472, 804, 470], [1098, -157, 1096, -160], [1032, -271, 1034, -268], [1096, -160, 1034, -268], [1030, -268, 1032, -271], [1030, -268, 1001, -218], [1001, -218, 999, -214], [903, -269, 996, -216], [900, -271, 903, -269], [999, -214, 996, -216], [1197, -100, 1194, -102], [1098, -157, 1102, -155], [1102, -155, 1194, -102], [1195, -96, 1197, -100], [1195, -96, 1166, -46], [1166, -46, 1164, -43], [1168, -43, 1292, -43], [1168, -43, 1164, -43], [1296, -43, 1292, -43], [1201, 13, 1293, -41], [1197, 15, 1201, 13], [1296, -43, 1293, -41], [1232, 75, 1294, 183], [1296, 186, 1294, 183], [1230, 72, 1232, 75], [1197, 15, 1199, 18], [1228, 68, 1230, 72], [1228, 68, 1199, 18], [1201, 241, 1293, 188], [1201, 241, 1197, 243], [1296, 186, 1293, 188], [1228, 297, 1199, 247], [1197, 243, 1199, 247], [1228, 297, 1230, 300], [1230, 300, 1226, 300], [1098, 300, 1102, 300], [1226, 300, 1102, 300], [1032, 415, 1036, 415], [1094, 415, 1036, 415], [1094, 415, 1098, 415], [1098, 411, 1098, 304], [1098, 304, 1098, 300], [1098, 415, 1098, 411], [904, 415, 1028, 415], [904, 415, 900, 415], [1028, 415, 1032, 415], [704, -160, 766, -268], [704, -160, 702, -157], [766, -268, 768, -271], [799, -218, 801, -214], [799, -218, 770, -268], [768, -271, 770, -268], [801, -214, 804, -216], [897, -269, 900, -271], [804, -216, 897, -269], [606, -102, 699, -155], [702, -157, 699, -155], [603, -100, 606, -102], [605, -96, 603, -100], [634, -46, 636, -43], [605, -96, 634, -46], [504, -43, 508, -43], [632, -43, 636, -43], [632, -43, 508, -43], [504, -43, 507, -41], [603, 15, 600, 13], [507, -41, 600, 13], [504, 186, 506, 183], [568, 75, 506, 183], [568, 75, 570, 72], [601, 18, 572, 68], [603, 15, 601, 18], [570, 72, 572, 68], [507, 188, 600, 241], [504, 186, 507, 188], [603, 243, 600, 241], [570, 300, 572, 297], [601, 247, 572, 297], [603, 243, 601, 247], [702, 300, 698, 300], [574, 300, 698, 300], [570, 300, 574, 300], [764, 415, 706, 415], [706, 415, 702, 415], [764, 415, 768, 415], [702, 411, 702, 415], [702, 300, 702, 304], [702, 304, 702, 411], [768, 415, 772, 415], [900, 415, 896, 415], [896, 415, 772, 415], [1098, -157, 1095, -159], [1003, -212, 999, -214], [1003, -212, 1095, -159], [997, -211, 999, -214], [968, -160, 966, -157], [997, -211, 968, -160], [902, -268, 964, -160], [902, -268, 900, -271], [964, -160, 966, -157], [1100, -154, 1162, -46], [1164, -43, 1162, -46], [1098, -157, 1100, -154], [1166, -39, 1164, -43], [1195, 11, 1166, -39], [1195, 11, 1197, 15], [1194, 17, 1102, 70], [1098, 72, 1102, 70], [1197, 15, 1194, 17], [1201, 131, 1197, 129], [1296, 186, 1293, 184], [1201, 131, 1293, 184], [1164, 186, 1168, 186], [1296, 186, 1292, 186], [1292, 186, 1168, 186], [1199, 125, 1197, 129], [1230, 72, 1228, 75], [1199, 125, 1228, 75], [1230, 72, 1226, 72], [1098, 72, 1102, 72], [1226, 72, 1102, 72], [1166, 189, 1195, 240], [1197, 243, 1195, 240], [1166, 189, 1164, 186], [1098, 300, 1102, 298], [1194, 245, 1102, 298], [1194, 245, 1197, 243], [1034, 411, 1032, 415], [1096, 304, 1034, 411], [1096, 304, 1098, 300], [1001, 361, 1030, 411], [999, 358, 1001, 361], [1032, 415, 1030, 411], [996, 360, 903, 413], [900, 415, 903, 413], [996, 360, 999, 358], [705, -159, 798, -212], [705, -159, 702, -157], [801, -214, 798, -212], [803, -211, 832, -160], [801, -214, 803, -211], [832, -160, 834, -157], [834, -157, 836, -160], [898, -268, 836, -160], [898, -268, 900, -271], [900, -271, 900, -267], [900, -161, 900, -157], [900, -161, 900, -267], [638, -46, 700, -154], [700, -154, 702, -157], [638, -46, 636, -43], [634, -39, 636, -43], [605, 11, 603, 15], [605, 11, 634, -39], [702, 72, 699, 70], [606, 17, 699, 70], [603, 15, 606, 17], [600, 131, 507, 184], [504, 186, 507, 184], [603, 129, 600, 131], [632, 186, 636, 186], [632, 186, 508, 186], [504, 186, 508, 186], [603, 129, 601, 125], [572, 75, 601, 125], [572, 75, 570, 72], [702, 72, 698, 72], [570, 72, 574, 72], [574, 72, 698, 72], [605, 240, 603, 243], [634, 189, 636, 186], [605, 240, 634, 189], [702, 300, 699, 298], [603, 243, 606, 245], [606, 245, 699, 298], [704, 304, 702, 300], [704, 304, 766, 411], [768, 415, 766, 411], [799, 361, 770, 411], [768, 415, 770, 411], [799, 361, 801, 358], [900, 415, 897, 413], [897, 413, 804, 360], [801, 358, 804, 360], [1094, -157, 970, -157], [970, -157, 966, -157], [1094, -157, 1098, -157], [904, -157, 962, -157], [904, -157, 900, -157], [966, -157, 962, -157], [1098, -43, 1098, -47], [1098, -153, 1098, -47], [1098, -157, 1098, -153], [1164, -43, 1160, -43], [1102, -43, 1160, -43], [1098, -43, 1102, -43], [1100, 68, 1162, -39], [1164, -43, 1162, -39], [1098, 72, 1100, 68], [1195, 132, 1197, 129], [1166, 183, 1164, 186], [1195, 132, 1166, 183], [1098, 72, 1102, 74], [1102, 74, 1194, 127], [1197, 129, 1194, 127], [1098, 300, 1100, 297], [1162, 189, 1164, 186], [1162, 189, 1100, 297], [999, 358, 1003, 356], [1095, 302, 1003, 356], [1095, 302, 1098, 300], [968, 304, 997, 354], [999, 358, 997, 354], [968, 304, 966, 300], [964, 304, 902, 411], [966, 300, 964, 304], [900, 415, 902, 411], [830, -157, 834, -157], [702, -157, 706, -157], [830, -157, 706, -157], [896, -157, 838, -157], [896, -157, 900, -157], [834, -157, 838, -157], [900, -153, 900, -47], [900, -47, 900, -43], [900, -157, 900, -153], [702, -157, 702, -153], [702, -47, 702, -153], [702, -43, 702, -47], [698, -43, 640, -43], [698, -43, 702, -43], [636, -43, 640, -43], [636, -43, 638, -39], [702, 72, 700, 68], [638, -39, 700, 68], [605, 132, 603, 129], [605, 132, 634, 183], [634, 183, 636, 186], [603, 129, 606, 127], [606, 127, 699, 74], [699, 74, 702, 72], [638, 189, 700, 297], [636, 186, 638, 189], [702, 300, 700, 297], [702, 300, 705, 302], [801, 358, 798, 356], [705, 302, 798, 356], [803, 354, 832, 304], [832, 304, 834, 300], [803, 354, 801, 358], [898, 411, 836, 304], [834, 300, 836, 304], [900, 415, 898, 411], [900, 411, 900, 304], [900, 415, 900, 411], [900, 300, 900, 304], [1003, -102, 999, -100], [1098, -157, 1095, -155], [1003, -102, 1095, -155], [1034, -46, 1096, -154], [1032, -43, 1034, -46], [1098, -157, 1096, -154], [997, -103, 968, -154], [999, -100, 997, -103], [966, -157, 968, -154], [902, -46, 900, -43], [902, -46, 964, -154], [964, -154, 966, -157], [1036, -43, 1094, -43], [1094, -43, 1098, -43], [1032, -43, 1036, -43], [1098, 72, 1098, 68], [1098, -39, 1098, -43], [1098, 68, 1098, -39], [1098, 72, 1100, 75], [1164, 186, 1162, 183], [1100, 75, 1162, 183], [1160, 186, 1164, 186], [1102, 186, 1098, 186], [1160, 186, 1102, 186], [1098, 300, 1098, 296], [1098, 190, 1098, 296], [1098, 190, 1098, 186], [966, 300, 970, 300], [1098, 300, 1094, 300], [970, 300, 1094, 300], [904, 300, 900, 300], [966, 300, 962, 300], [962, 300, 904, 300], [801, -100, 798, -102], [705, -155, 798, -102], [702, -157, 705, -155], [768, -43, 766, -46], [766, -46, 704, -154], [702, -157, 704, -154], [803, -103, 832, -154], [832, -154, 834, -157], [803, -103, 801, -100], [900, -43, 898, -46], [836, -154, 898, -46], [834, -157, 836, -154], [706, -43, 702, -43], [768, -43, 764, -43], [706, -43, 764, -43], [702, -39, 702, -43], [702, -39, 702, 68], [702, 72, 702, 68], [700, 75, 638, 183], [700, 75, 702, 72], [636, 186, 638, 183], [698, 186, 702, 186], [698, 186, 640, 186], [636, 186, 640, 186], [702, 190, 702, 186], [702, 190, 702, 296], [702, 300, 702, 296], [702, 300, 706, 300], [830, 300, 706, 300], [830, 300, 834, 300], [896, 300, 900, 300], [834, 300, 838, 300], [896, 300, 838, 300], [900, 296, 900, 190], [900, 296, 900, 300], [900, 186, 900, 190], [1030, -46, 1032, -43], [999, -100, 1001, -96], [1030, -46, 1001, -96], [999, -100, 996, -98], [903, -45, 996, -98], [903, -45, 900, -43], [1034, -39, 1096, 68], [1032, -43, 1034, -39], [1098, 72, 1096, 68], [1098, 182, 1098, 186], [1098, 72, 1098, 76], [1098, 76, 1098, 182], [1032, 186, 1036, 186], [1094, 186, 1098, 186], [1036, 186, 1094, 186], [1098, 300, 1096, 297], [1034, 189, 1096, 297], [1032, 186, 1034, 189], [999, 243, 1003, 245], [1098, 300, 1095, 298], [1003, 245, 1095, 298], [997, 247, 968, 297], [999, 243, 997, 247], [966, 300, 968, 297], [900, 186, 902, 189], [964, 297, 902, 189], [966, 300, 964, 297], [768, -43, 770, -46], [799, -96, 770, -46], [801, -100, 799, -96], [801, -100, 804, -98], [900, -43, 897, -45], [804, -98, 897, -45], [766, -39, 704, 68], [702, 72, 704, 68], [766, -39, 768, -43], [702, 76, 702, 72], [702, 182, 702, 76], [702, 186, 702, 182], [706, 186, 764, 186], [706, 186, 702, 186], [768, 186, 764, 186], [766, 189, 704, 297], [702, 300, 704, 297], [766, 189, 768, 186], [798, 245, 705, 298], [702, 300, 705, 298], [801, 243, 798, 245], [803, 247, 832, 297], [803, 247, 801, 243], [832, 297, 834, 300], [900, 186, 898, 189], [836, 297, 834, 300], [836, 297, 898, 189], [1032, -43, 1028, -43], [900, -43, 904, -43], [1028, -43, 904, -43], [1030, -39, 1001, 11], [999, 15, 1001, 11], [1032, -43, 1030, -39], [1003, 17, 1095, 70], [1003, 17, 999, 15], [1098, 72, 1095, 70], [1032, 186, 1034, 183], [1034, 183, 1096, 75], [1098, 72, 1096, 75], [1030, 189, 1001, 240], [1032, 186, 1030, 189], [999, 243, 1001, 240], [900, 186, 903, 188], [903, 188, 996, 241], [999, 243, 996, 241], [900, -43, 896, -43], [768, -43, 772, -43], [772, -43, 896, -43], [770, -39, 768, -43], [770, -39, 799, 11], [801, 15, 799, 11], [801, 15, 798, 17], [702, 72, 705, 70], [798, 17, 705, 70], [702, 72, 704, 75], [768, 186, 766, 183], [766, 183, 704, 75], [770, 189, 799, 240], [770, 189, 768, 186], [801, 243, 799, 240], [900, 186, 897, 188], [801, 243, 804, 241], [804, 241, 897, 188], [999, 15, 996, 13], [996, 13, 903, -41], [900, -43, 903, -41], [966, 72, 968, 68], [997, 18, 999, 15], [997, 18, 968, 68], [966, 72, 970, 72], [1094, 72, 970, 72], [1094, 72, 1098, 72], [1003, 127, 1095, 74], [1098, 72, 1095, 74], [1003, 127, 999, 129], [1030, 183, 1032, 186], [1030, 183, 1001, 132], [999, 129, 1001, 132], [1032, 186, 1028, 186], [1028, 186, 904, 186], [900, 186, 904, 186], [804, 13, 897, -41], [801, 15, 804, 13], [900, -43, 897, -41], [832, 68, 834, 72], [803, 18, 832, 68], [803, 18, 801, 15], [832, 75, 834, 72], [803, 125, 832, 75], [803, 125, 801, 129], [702, 72, 706, 72], [830, 72, 834, 72], [830, 72, 706, 72], [705, 74, 798, 127], [702, 72, 705, 74], [801, 129, 798, 127], [804, 131, 897, 184], [801, 129, 804, 131], [900, 186, 897, 184], [801, 129, 799, 132], [768, 186, 770, 183], [799, 132, 770, 183], [900, 186, 896, 186], [772, 186, 896, 186], [768, 186, 772, 186], [966, 72, 962, 72], [904, 72, 962, 72], [904, 72, 900, 72], [964, 68, 902, -39], [964, 68, 966, 72], [900, -43, 902, -39], [902, 183, 900, 186], [902, 183, 964, 75], [964, 75, 966, 72], [966, 72, 968, 75], [968, 75, 997, 125], [999, 129, 997, 125], [903, 184, 900, 186], [999, 129, 996, 131], [903, 184, 996, 131], [896, 72, 838, 72], [896, 72, 900, 72], [834, 72, 838, 72], [900, -43, 898, -39], [836, 68, 898, -39], [836, 68, 834, 72], [900, 68, 900, -39], [900, -43, 900, -39], [900, 68, 900, 72], [1392, -327, 1395, -329], [1395, -329, 1393, -332], [1393, 475, 1395, 472], [1395, 472, 1392, 470], [408, -327, 405, -329], [405, -329, 407, -332], [408, 470, 405, 472], [405, 472, 407, 475], [1393, -211, 1395, -214], [1395, -214, 1392, -216], [407, -211, 405, -214], [405, -214, 408, -216], [1393, -103, 1395, -100], [1395, -100, 1392, -98], [1393, 354, 1395, 358], [1395, 358, 1392, 360], [1194, 584, 1197, 586], [1197, 586, 1199, 583], [408, -98, 405, -100], [405, -100, 407, -103], [408, 360, 405, 358], [405, 358, 407, 354], [606, 584, 603, 586], [603, 586, 601, 583], [1393, 18, 1395, 15], [1395, 15, 1392, 13], [1393, 247, 1395, 243], [1395, 243, 1392, 241], [997, 583, 999, 586], [999, 586, 1003, 584], [407, 18, 405, 15], [405, 15, 408, 13], [407, 247, 405, 243], [405, 243, 408, 241], [803, 583, 801, 586], [801, 586, 798, 584], [1393, 125, 1395, 129], [1395, 129, 1392, 131], [408, 131, 405, 129], [405, 129, 407, 125]];
var fixed_nodes = [[438,-386],[504,-386],[570,-386],[834,-386],[900,-386],[966,-386],[1230,-386],[1296,-386],[1362,-386]];
//var fixed_nodes = []; //uncomment this to make the mesh fall down

var x_offset = -150;
var y_offset = +200;
var x_scale = 0.5;
var y_scale = 0.5;

/*
var x_spacing = 5;
var y_spacing = 5;
var i0 = 10;
*/

// Aatish Bhatia 01/16/2016 (@aatishb)
// Adapted from Dan Shiffman's Nature of Code
// http://natureofcode.com/book/chapter-5-physics-libraries/
// https://github.com/shiffman/The-Nature-of-Code-Examples-p5.js

// Reference to physics world
var physics;

var particles = [];
var springs = [];
var stiffness = 0.3;

var points = [];
var lines = [];

function setup() {
  createCanvas(600,600);

  // Initialize the physics
  physics=new VerletPhysics2D();
  physics.addBehavior(new GravityBehavior(new Vec2D(0,0.5)));

  // Set the world's bounding box
  physics.setWorldBounds(new Rect(0,0,width,height));
  
  // Make particles
  for(var i = 0; i<mesh.length; i++){

    var x1 = x_scale*mesh[i][0]+x_offset;
    var y1 = y_scale*mesh[i][1]+y_offset;
    var x2 = x_scale*mesh[i][2]+x_offset;
    var y2 = y_scale*mesh[i][3]+y_offset;

    // Check if particle already exists at that location
    if (points.indexOf(str(x1)+':'+str(y1)) < 0) {
      // If not, create the particle
      particles.push(new Particle(new Vec2D(x1,y1)));
      // Anything we make, we have to add into the physics world
      physics.addParticle(particles.slice(-1)[0]);
      // Index new particles by their location
      points.push(str(x1)+':'+str(y1));
    }

    if (points.indexOf(str(x2)+':'+str(y2)) < 0) {
      particles.push(new Particle(new Vec2D(x2,y2)));
      physics.addParticle(particles.slice(-1)[0]);
      points.push(str(x2)+':'+str(y2));
    }

    var i1 = points.indexOf(str(x1)+':'+str(y1));
    var i2 = points.indexOf(str(x2)+':'+str(y2));

    for(var j = 0; j<fixed_nodes.length; j++){
      if(x1==x_scale*fixed_nodes[j][0]+x_offset && y1==y_scale*fixed_nodes[j][1]+y_offset){
        particles[i1].lock();
      }
      if(x2==x_scale*fixed_nodes[j][0]+x_offset && y2==y_scale*fixed_nodes[j][1]+y_offset){
        particles[i2].lock();
      }

    }
    //particles[i1].lock();
    //particles[i2].lock();

    // Make a spring connecting both Particles
    springs.push(new VerletSpring2D(particles[i1],particles[i2],dist(x1,y1,x2,y2),stiffness));
    physics.addSpring(springs.slice(-1)[0]);
    //line(x1,y1,x2,y2);
    lines.push([x1,y1,x2,y2]);
  }




  
  // Lock corners in place
  //particles[0].lock();
  //particles[cloth_particles_wide-1][0].lock();

  //print(points.slice(-1)[0]);
  //print(points.indexOf(str(301)+':'+str(194.1)));
}

function draw() {

  // Update the physics world
  physics.update();

  background(51);

  // This next bit draws lines between the particles
  stroke(200);
  strokeWeight(2);

  for(var i=0; i<lines.length; i++){

    var x1 = lines[i][0];
    var y1 = lines[i][1];
    var x2 = lines[i][2];
    var y2 = lines[i][3];
    
    var i1 = points.indexOf(str(x1)+':'+str(y1));
    var i2 = points.indexOf(str(x2)+':'+str(y2));

    //print(i1,i2);
    line(particles[i1].x,particles[i1].y,particles[i2].x,particles[i2].y);
  
  
  }

}
  

/*
// NOT YET IMPLEMENTED  
// Move the nearest particle by dragging the mouse
function mousePressed() {
  for(var i=0; i<lines.length; i++){

    var x1 = lines[i][0];
    var y1 = lines[i][1];
    var x2 = lines[i][2];
    var y2 = lines[i][3];

    var i1 = points.indexOf(str(x1)+':'+str(y1));
    var i2 = points.indexOf(str(x2)+':'+str(y2));


      if(abs(particles[i1].x-mouseX)<x_spacing && abs(particles[i1].y-mouseY)<y_spacing){
        i0 = i1;
      }
      else if(abs(particles[i2].x-mouseX)<x_spacing && abs(particles[i2].y-mouseY)<y_spacing){
        i0 = i2;
      }


    
  }

  particles[i0].lock();
  particles[i0].x = mouseX;
  particles[i0].y = mouseY;
  particles[i0].unlock();

} 

*/
 
